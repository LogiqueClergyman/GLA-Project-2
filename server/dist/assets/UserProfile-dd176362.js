import{ag as t,af as P,ae as z,an as A,ao as d,ah as e,ak as i,ap as b}from"./index-b86e62c6.js";import{u as M}from"./upload-6d4c576a.js";const T=()=>{const[a,m]=t.useState([]),[u,N]=t.useState([]),[h,v]=t.useState([]),[l,g]=t.useState(null),[y,C]=t.useState(""),p=P(),x=z(),f=A(),w=f.state&&f.state.email,j=d(s=>s.userData.profileImage),c=d(s=>s.userData.email),I=d(s=>s.userData.details);t.useEffect(()=>m(I),[]);const S=async s=>{try{const o=localStorage.getItem("token"),r=await i.post("/cource/getMyCourses",{email:s},{headers:{Authorization:`Bearer ${o}`}});console.log(r.data),m(r.data.user),!j&&r.data.user.email===c&&p(b(r.data.user.profileImage)),v(r.data.courses)}catch(o){console.error("Error fetching courses:",o)}},k=async s=>{try{console.log(s);const o=localStorage.getItem("token"),r=await i.post("/cource/getCourses",{email:s},{headers:{Authorization:`Bearer ${o}`}});console.log(r.data.courses),N(r.data.courses)}catch(o){console.error("Error fetching courses:",o)}},U=s=>{g(s.target.files[0])},E=async()=>{try{const{url:s}=await M(l);return console.log(s),C(s),p(b(s)),D(s),s}catch(s){return console.error("Error uploading image:",s),null}},D=async s=>{try{console.log(y);const o=localStorage.getItem("token"),r=await i.put("/updateProfileImage",{imageUrl:s},{headers:{Authorization:`Bearer ${o}`}});console.log(r.data),g("")}catch(o){console.log(o)}},n=w||c;return t.useEffect(()=>{console.log(n),k(n),S(n),l!==null&&E(),console.log(h)},[l]),e.jsx("div",{className:"bg-blue-100",children:e.jsxs("main",{className:" mx-auto py-8 md:px-8 px-4 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"border rounded-md bg-white md:p-6 p-3 md:mb-6 mb-3 h-full",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Profile"}),e.jsxs("div",{className:"border rounded-md p-4 mb-4",children:[e.jsx("label",{htmlFor:"dropzone-file",className:"flex justify-center",children:e.jsxs("div",{className:"md:w-1/2  border-2 p-2 rounded-xl",children:[e.jsx("img",{src:`${a.email===c?j:a.profileImage}`,alt:"User Profile",className:"  object-cover rounded-full h-[20rem] w-[20rem]"}),e.jsx("input",{id:"dropzone-file",onChange:U,type:"file",className:"hidden"})]})}),e.jsxs("div",{className:"p-4 flex flex-col items-center",children:[e.jsx("p",{children:a.role==="Super Admin"&&e.jsx("span",{className:"font-semibold text-red-500",children:"Category: Master"})}),e.jsx("p",{children:a.role==="Admin"&&e.jsx("span",{className:"font-semibold text-red-500",children:"Category: Teacher"})}),e.jsx("p",{children:a.role==="User"&&e.jsx("span",{className:"font-semibold text-red-500",children:"Category: Student"})}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Name: "})," ",a.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Email: "})," ",a.email]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"border rounded-md bg-white p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"My Cource:"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 overflow-auto max-h-[500px]",children:h.map(s=>e.jsxs("div",{onClick:()=>{x("/myCourse")},className:"border rounded-md overflow-hidden h-52",children:[e.jsxs("video",{controls:!0,className:"w-full h-40 object-cover",children:[e.jsx("source",{src:s.courseUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsx("div",{className:"p-4",children:e.jsx("h3",{className:"text-lg font-bold mb-2",children:s.title})})]},s._id))})]}),u&&e.jsx("div",{children:e.jsxs("div",{className:"border rounded-md bg-white p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Courses:"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 overflow-auto max-h-[500px]",children:u.map(s=>e.jsxs("div",{onClick:()=>{x("/myCourse")},className:"border rounded-md overflow-hidden h-52",children:[e.jsxs("video",{controls:!0,className:"w-full h-40 object-cover",children:[e.jsx("source",{src:s.courseUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsx("div",{className:"p-4",children:e.jsx("h3",{className:"text-lg font-bold mb-2",children:s.title})})]},s._id))})]})})]})]})})};export{T as default};

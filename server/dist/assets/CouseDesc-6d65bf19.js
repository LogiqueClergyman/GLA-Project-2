import{j as e,u as S,d as _,e as j,H as R,b as x,Q as p}from"./index-40c438c0.js";import{S as A,R as D}from"./Review-1d64927f.js";const I="/assets/bg4-83b05ac4.svg",L="/assets/Notstar-23bf22de.png";function B({review:o}){let d=0,n=0;return o.length>0&&(o.forEach(c=>{d+=c.star}),n=d/o.length),e.jsxs("div",{className:"w-[40%] bg-white p-8 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(Math.floor(n))].map((c,i)=>e.jsx("img",{src:A,className:"w-4 h-4",alt:"Star"},i)),n%1!==0&&e.jsx("img",{src:L,className:"w-4 h-4",alt:"NotStar"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n.toFixed(2)}),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:"out of"}),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:"5"})]}),e.jsxs("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[o.length>0?o.length:0," Total Review"]}),[...Array(5)].map((c,i)=>{const s=i+1;let l=0;return o.length>0&&(l=o.filter(u=>u.star===s).length/o.length*100),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[s," star"]}),e.jsx("div",{className:"w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[l,"%"]})]},i)})]})}function O(){const o=t=>p.success(t),d=t=>p.info(t),n=t=>p.error(t),c=S(),i=_(),s=i.state&&i.state.course;console.log(s);const l=j(t=>t.userData),u=j(t=>t.userData._id),m=localStorage.getItem("token");if(!s)return c("/signin");function b(t){return new Promise(a=>{const r=document.createElement("script");r.src=t,r.onload=()=>{a(!0)},r.onerror=()=>{a(!1)},document.body.appendChild(r)})}async function w(t,a,r){if(!await b("https://checkout.razorpay.com/v1/checkout.js")){alert("Razorpay SDK failed to load. Are you online?");return}const g=await x.post("http://localhost:8080/payment/orders",{price:r},{headers:{Authorization:`Bearer ${m}`}});if(!g){alert("Server error. Are you online?");return}const{amount:k,currency:C,id:f}=g.data,z={key:"rzp_test_hCTnA3u7pb9fAs",amount:k.toString(),checkout:{method:{netbanking:1,card:1,upi:1,wallet:1}},currency:C,name:"LearnUp Edutech",description:a,image:{},order_id:f,handler:async function(h){const y={orderCreationId:f,razorpayPaymentId:h.razorpay_payment_id,razorpayOrderId:h.razorpay_order_id,razorpaySignature:h.razorpay_signature,courseId:t,email:l.email};console.log(y),(await x.post("http://localhost:8080/payment/success",{data:y},{headers:{Authorization:`Bearer ${m}`}})).data.msg==="success"&&(console.log("payment Successful"),N(t))},prefill:{name:l.name,email:l.email,contact:"9999999999"},notes:{courseId:t,courseName:s.title},theme:{color:"#61dafb"}};new window.Razorpay(z).open()}const N=async t=>{console.log("adding course");try{const a=await x.post("http://localhost:8080/cource/addCourse",{id:t},{headers:{Authorization:`Bearer ${m}`}});console.log(a.data),a.data.error?(n(a.data.error),d(a.data.path)):(o(a.data.message),console.log(a.data),c("/myCourse"))}catch(a){console.log("error "+a)}},v=async(t,a)=>{t.preventDefault();try{const r=await x.post("http://localhost:8080/cource/removeCourse",{id:a},{headers:{Authorization:`Bearer ${m}`}});console.log(r.data),r.data.error?(n(r.data.error),d(r.data.path)):(o(r.data.message),console.log(r.data),c("/courses"))}catch(r){console.log("error "+r)}};return e.jsxs("div",{className:"",style:{backgroundImage:`url(${I})`},children:[e.jsxs(R,{children:[e.jsx("title",{children:"LearnUp"}),e.jsx("meta",{name:"description",content:"LearnUp Courses Page"}),e.jsx("meta",{name:"keywords",content:"LearnUp, intership, LearnUp, Home, Study, Contest, Education, Learning platform, course, buy courses, courses"})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:" mx-auto gap-2 md:flex align-top bg-amber-950",children:e.jsx("div",{className:"flex-1 mx-auto md:p-2 w-full justify-center",children:e.jsxs("div",{className:"flex flex-wrap gap-4 sm:flex-nowrap w-full",children:[e.jsx("div",{className:"flex-1 min-w-[280px] p-1 max-w-[500px] justify-center",children:e.jsx("img",{className:"rounded-md w-full md:m-2",src:"https://placehold.co/100x60",alt:""})}),e.jsxs("div",{className:"max-w-[900px] ",children:[e.jsxs("div",{className:" items-center justify-between mx-1 md:mx-6",children:[e.jsx("h1",{className:"md:text-4xl text-3xl text-white font-semibold py-1",children:s.title}),e.jsxs("h2",{className:"text-slate-400",children:["by "," "+s.createBy]})]}),e.jsx("div",{className:" text-white bg-opacity-85 text-xl font-light mb-5 md:mb-10 rounded-sm md:rounded-md my-3 p-4",children:s.description}),e.jsx("div",{className:"flex justify-end md:mx-6",children:s.enrollID&&s.enrollID.includes(l.email)?e.jsxs("div",{className:"flex justify-between outline-1 items-center",children:[e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Remove from"}),e.jsx("p",{className:"text-blue-600",children:" My Courses:"})]}),e.jsx("button",{onClick:t=>{v(t,s._id)},className:"transition-all duration-300 text-red-500 border-2 hover:text-white border-red-500 hover:bg-gradient-to-r from-red-400 via-red-500 to-red-600 bg-white focus:ring-4 focus:outline-none focus:ring-red-300  font-medium rounded-lg md:text-lg text-md px-5 md:h-[50px] h-[35px] text-center mx-2 ",children:"Remove"})]}):e.jsxs("button",{href:"#_",class:"inline-flex overflow-hidden text-white bg-gray-900 rounded group",onClick:t=>{w(s._id,s.title,s.price)},children:[e.jsx("span",{class:"px-3.5 py-2 text-white bg-cyan-500 group-hover:bg-yellow-300 group-hover:text-amber-950 flex items-center justify-center",children:e.jsx("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("span",{class:"pl-7 pr-9 py-2.5",children:["â‚¹",s.price]})]})})]})]})})})}),e.jsxs("div",{className:"flex flex-col justify-start flex-wrap pace-y-5 mx-auto",children:[e.jsxs("div",{className:" flex flex-wrap md:flex-nowrap w-full bg-gray-300 bg-opacity-80",children:[e.jsxs("div",{className:"w-full md:mx-2 my-1 md:p-5 p-3 bg-white",children:[e.jsx("h1",{className:"font-semibold md:text-2xl text-xl ml-2",children:"Insights:"}),e.jsx("p",{className:"p-2 text-black text-lg mb-5 md:mb-10",children:s.extraDescription})]}),e.jsx("div",{children:e.jsxs("div",{className:" w-full md:mx-2 border-2 md:p-5 p-3 bg-white my-1",children:[e.jsx("h1",{className:"font-thin md:text-2xl text-xl ml-5",children:"Course Content:"}),e.jsx("ol",{className:"md:mx-5 marker:text-black marker:font-thin font-thin list-decimal max-h-full overflow-auto ",children:s.syllabus&&s.syllabus.map((t,a)=>e.jsx("li",{className:"bg-gray-100 rounded-md mx-5 my-1 text-lg font-medium pl-5 border-b",children:t},a))})]})})]}),e.jsxs("div",{className:"w-[100vw] p-4 bg-gray-300 flex  flex-col",children:[console.log(s),e.jsx(B,{review:s.review}),e.jsx(D,{courseDetails:s,userId:u})]})]})]})}export{O as default};
